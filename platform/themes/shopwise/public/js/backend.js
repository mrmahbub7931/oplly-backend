!function(e){"use strict";e.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}),window.canopyCookieNewsletter=function(){var t="canopy_cookie_newsletter",s=e("div[data-session-domain]").data("session-domain"),o=e("#newsletter-modal");function a(e){!function(e,t,o){var a=new Date;a.setTime(a.getTime()+24*o*60*60*1e3),document.cookie=e+"="+t+";expires="+a.toUTCString()+";domain="+s+";path=/"}(t,1,e)}function r(e){return-1!==document.cookie.split("; ").indexOf(e+"=1")}return r(t)||setTimeout((function(){o.modal("show",{},500)}),5e3),o.on("hidden.bs.modal",(function(){!r(t)&&e("#dont_show_again").is(":checked")?a(3):a(1/24)})),{newsletterWithCookies:a,hideCookieDialog:function(){o.modal("hide",{},500)}}}(),e(document).ready((function(){var t=function(t){e(".newsletter-error-message").html(t).show()},s=function(s){var o="";e.each(s,(function(e,t){""!==o&&(o+="<br />"),o+=t})),t(o)};window.showAlert=function(t,s){if(t&&""!==s){var o=Math.floor(1e3*Math.random()),a='<div class="alert '.concat(t,' alert-dismissible" id="').concat(o,'">\n                            <span class="close ion-close" data-dismiss="alert" aria-label="close"></span>\n                            <i class="ion-')+("alert-success"===t?"checkmark-circled":"alert-circled")+' message-icon"></i>\n                            '.concat(s,"\n                        </div>");e("#alert-container").append(a).ready((function(){window.setTimeout((function(){e("#alert-container #".concat(o)).remove()}),6e3)}))}},e(document).on("click",".newsletter-form button[type=submit]",(function(o){o.preventDefault(),o.stopPropagation();var a=e(this);a.addClass("button-loading"),e(".newsletter-success-message").html("").hide(),e(".newsletter-error-message").html("").hide(),e.ajax({type:"POST",cache:!1,url:a.closest("form").prop("action"),data:new FormData(a.closest("form")[0]),contentType:!1,processData:!1,success:function(s){var o;a.removeClass("button-loading"),"undefined"!=typeof refreshRecaptcha&&refreshRecaptcha(),s.error?t(s.message):(window.canopyCookieNewsletter.newsletterWithCookies(30),a.closest("form").find("input[type=email]").val(""),o=s.message,e(".newsletter-success-message").html(o).show(),setTimeout((function(){a.closest(".modal-body").find('button[data-dismiss="modal"]').trigger("click")}),2e3))},error:function(o){var r;"undefined"!=typeof refreshRecaptcha&&refreshRecaptcha(),a.removeClass("button-loading"),void 0!==(r=o).errors&&r.errors.length?s(r.errors):void 0!==r.responseJSON?void 0!==r.responseJSON.errors?422===r.status&&s(r.responseJSON.errors):void 0!==r.responseJSON.message?t(r.responseJSON.message):e.each(r.responseJSON,(function(s,o){e.each(o,(function(e,s){t(s)}))})):t(r.statusText)}})}))})),e(document).ready((function(){e(document).on("change",".switch-currency",(function(){e(this).closest("form").submit()})),e(document).on("change",".product-filter-item",(function(){e(this).closest("form").submit()})),e(document).on("click",".js-add-to-wishlist-button",(function(t){t.preventDefault();var s=e(this),o=parseInt(s.find(".wishlist_count").text());s.addClass("button-loading"),e.ajax({url:s.prop("href"),method:"POST",success:function(t){if(t.error)return s.removeClass("button-loading"),window.showAlert("alert-danger",t.message),!1;window.showAlert("alert-success",t.message),s.find(".wishlist_count").text(o+1),e(".btn-wishlist span").text(t.data.count),s.removeClass("button-loading").removeClass("js-add-to-wishlist-button").addClass("js-remove-from-wishlist-button active"),s.find("i").removeClass("far").addClass("fas")},error:function(){s.removeClass("button-loading")}})})),e(document).on("click",".js-notify-when-back-button",(function(t){t.preventDefault();var s=e(this);s.addClass("button-loading");var o=s.parent().parent().parent();console.log(o,o.attr("action"),new FormData(o[0])),e.ajax({url:o.attr("action"),method:"POST",processData:!1,contentType:!1,data:new FormData(o[0]),success:function(e){if(e.error)return s.removeClass("button-loading"),window.showAlert("alert-danger",e.message),!1;s.parent().parent().parent().find(".notify-update--form").hide(),s.parent().parent().parent().find(".not-available--message.before-message").hide(),s.parent().parent().parent().find(".not-available--message.success-message").show(),s.removeClass("button-loading")},error:function(){s.removeClass("button-loading")}})})),e(document).on("click",".js-remove-from-wishlist-button",(function(t){t.preventDefault();var s=e(this),o=parseInt(s.find(".wishlist_count").text());s.addClass("button-loading"),e.ajax({url:s.prop("href"),method:"DELETE",success:function(t){if(t.error)return s.removeClass("button-loading"),window.showAlert("alert-danger",t.message),!1;window.showAlert("alert-success",t.message),o-=1,s.find(".wishlist_count").text(o<0?0:o),e(".btn-wishlist span").text(t.data.count),s.closest("tr").remove(),s.removeClass("button-loading").removeClass("js-remove-from-wishlist-button active").addClass("js-add-to-wishlist-button"),s.find("i").removeClass("fas").addClass("far")},error:function(){s.removeClass("button-loading")}})})),e(document).on("click",".add-to-cart-button",(function(t){t.preventDefault();var s=e(this);s.prop("disabled",!0).addClass("button-loading"),e.ajax({url:s.prop("href"),method:"POST",data:{id:s.data("id")},dataType:"json",success:function(t){if(s.prop("disabled",!1).removeClass("button-loading").addClass("active"),t.error)return window.showAlert("alert-danger",t.message),!1;window.showAlert("alert-success",t.message),"checkout"===s.prop("name")&&void 0!==t.data.next_url?window.location.href=t.data.next_url:e.ajax({url:window.siteUrl+"/ajax/cart",method:"GET",success:function(t){t.error||(e(".cart_box").html(t.data.html),e(".btn-shopping-cart span").text(t.data.count))}})},error:function(){s.prop("disabled",!1).removeClass("button-loading")}})})),e(document).on("click",".remove-cart-button",(function(t){t.preventDefault(),e(".confirm-remove-item-cart").data("url",e(this).prop("href")),e("#remove-item-modal").modal("show")})),e(document).on("click",".confirm-remove-item-cart",(function(t){t.preventDefault();var s=e(this);s.prop("disabled",!0).addClass("button-loading"),e.ajax({url:s.data("url"),method:"GET",success:function(t){if(s.prop("disabled",!1).removeClass("button-loading"),t.error)return!1;s.closest(".modal").modal("hide"),e(".form--shopping-cart").length&&e(".form--shopping-cart").load(window.location.href+" .form--shopping-cart > *"),e.ajax({url:window.siteUrl+"/ajax/cart",method:"GET",success:function(t){t.error||(e(".cart_box").html(t.data.html),e(".btn-shopping-cart span").text(t.data.count))}})},error:function(){s.prop("disabled",!1).removeClass("button-loading")}})})),window.onBeforeChangeSwatches=function(){e(".add-to-cart-form button[type=submit]").prop("disabled",!0).addClass("btn-disabled")},window.onChangeSwatchesSuccess=function(t){if(e(".add-to-cart-form .error-message").hide(),e(".add-to-cart-form .success-message").hide(),t.error)e(".add-to-cart-form button[type=submit]").prop("disabled",!0).addClass("btn-disabled"),e(".number-items-available").html('<span class="text-danger">('+t.message+")</span>").show(),e("#hidden-product-id").val("");else{e(".add-to-cart-form").find(".error-message").hide(),e(".product_price .product-sale-price-text").text(t.data.display_sale_price),t.data.sale_price!==t.data.price?(e(".product_price .product-price-text").text(t.data.display_price).show(),e(".product_price .on_sale .on_sale_percentage_text").text(t.data.sale_percentage).show(),e(".product_price .show").hide()):(e(".product_price .product-price-text").text(t.data.sale_percentage).hide(),e(".product_price .on_sale .on_sale_percentage_text").text(t.data.sale_percentage).hide(),e(".product_price .on_sale").hide()),e("#hidden-product-id").val(t.data.id),e(".add-to-cart-form button[type=submit]").prop("disabled",!1).removeClass("btn-disabled"),e(".number-items-available").html('<span class="text-success">('+t.message+")</span>").show();var s="";t.data.image_with_sizes.thumb.forEach((function(e,o){s+='<div class="item"><a href="#" class="product_gallery_item '+(0===o?"active":"")+'" data-image="'+t.data.image_with_sizes.origin[o]+'" data-zoom-image="'+t.data.image_with_sizes.origin[o]+'"><img src="'+e+'" alt="image"/></a></div>'}));var o=e(".slick_slider");o.slick("unslick"),o.html(s),o.slick({rtl:"rtl"===e("body").prop("dir"),arrows:o.data("arrows"),dots:o.data("dots"),infinite:o.data("infinite"),centerMode:o.data("center-mode"),vertical:o.data("vertical"),fade:o.data("fade"),cssEase:o.data("css-ease"),autoplay:o.data("autoplay"),verticalSwiping:o.data("vertical-swiping"),autoplaySpeed:o.data("autoplay-speed"),speed:o.data("speed"),pauseOnHover:o.data("pause-on-hover"),draggable:o.data("draggable"),slidesToShow:o.data("slides-to-show"),slidesToScroll:o.data("slides-to-scroll"),asNavFor:o.data("as-nav-for"),focusOnSelect:o.data("focus-on-select"),responsive:o.data("responsive")}),e(window).trigger("resize");var a=e("#product_img");a.prop("src",t.data.image_with_sizes.origin[0]).data("zoom-image",t.data.image_with_sizes.origin[0]);var r=!1;(r=!r)?a.length>0&&a.elevateZoom({cursor:"crosshair",easing:!0,gallery:"pr_item_gallery",zoomType:"inner",galleryActiveClass:"active"}):(e.removeData(a,"elevateZoom"),e(".zoomContainer:last-child").remove())}};var t=function(t,o){if(void 0===t.errors||_.isArray(t.errors))if(void 0!==t.responseJSON)if(void 0!==t.responseJSON.errors&&422===t.status)s(t.responseJSON.errors,o);else if(void 0!==t.responseJSON.message)e(o).find(".error-message").html(t.responseJSON.message).show();else{var a="";e.each(t.responseJSON,(function(t,s){e.each(s,(function(e,t){a+=t+"<br />"}))})),e(o).find(".error-message").html(a).show()}else e(o).find(".error-message").html(t.statusText).show();else s(t.errors,o)},s=function(t,s){var o="";e.each(t,(function(e,t){o+=t+"<br />"})),e(s).find(".success-message").html("").hide(),e(s).find(".error-message").html("").hide(),e(s).find(".error-message").html(o).show()};e(document).on("click",".add-to-cart-form button[type=submit]",(function(s){s.preventDefault(),s.stopPropagation();var o=e(this);e("#hidden-product-id").val()?(o.prop("disabled",!0).addClass("btn-disabled").addClass("button-loading"),o.closest("form").find(".error-message").hide(),o.closest("form").find(".success-message").hide(),e.ajax({type:"POST",cache:!1,url:o.closest("form").prop("action"),data:new FormData(o.closest("form")[0]),contentType:!1,processData:!1,success:function(t){if(o.prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading"),t.error)return o.closest("form").find(".error-message").html(t.message).show(),!1;o.closest("form").find(".success-message").html(t.message).show(),"checkout"===o.prop("name")&&void 0!==t.data.next_url?window.location.href=t.data.next_url:e.ajax({url:window.siteUrl+"/ajax/cart",method:"GET",success:function(t){t.error||(e(".cart_box").html(t.data.html),e(".btn-shopping-cart span").text(t.data.count))}})},error:function(e){o.prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading"),t(e,o.closest("form"))}})):o.prop("disabled",!0).addClass("btn-disabled")})),e(document).on("click",".notify-when-back-form button[type=submit]",(function(s){s.preventDefault(),s.stopPropagation();var o=e(this);e("#talent-id").val()?(o.prop("disabled",!0).addClass("btn-disabled").addClass("button-loading"),o.closest("form").find(".error-message").hide(),o.closest("form").find(".success-message").hide(),e.ajax({type:"POST",cache:!1,url:o.closest("form").prop("action"),data:new FormData(o.closest("form")[0]),contentType:!1,processData:!1,success:function(e){if(o.prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading"),e.error)return o.closest("form").find(".error-message").html(e.message).show(),!1;o.closest("form").find(".success-message").html(e.message).show()},error:function(e){o.prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading"),t(e,o.closest("form"))}})):o.prop("disabled",!0).addClass("btn-disabled")})),e(".custome-checkbox-rating input:checkbox").on("click",(function(){var t=e(this);t.is(":checked")?(e(".custome-checkbox-rating input:checkbox").prop("checked",!1),t.prop("checked",!0)):t.prop("checked",!1)})),e(document).on("change",".submit-form-on-change",(function(){e(this).closest("form").submit()})),e(document).on("click",".form-review-product button[type=submit]",(function(s){var o=this;s.preventDefault(),s.stopPropagation(),e(this).prop("disabled",!0).addClass("btn-disabled").addClass("button-loading"),e.ajax({type:"POST",cache:!1,url:e(this).closest("form").prop("action"),data:new FormData(e(this).closest("form")[0]),contentType:!1,processData:!1,success:function(t){e(o).closest("form").find(".success-message").html("").hide(),e(o).closest("form").find(".error-message").html("").hide(),t.error?(e(o).closest("form").find(".error-message").html(t.message).show(),setTimeout((function(){e(this).closest("form").find(".error-message").html("").hide()}),5e3)):(e(o).closest("form").find("select").val(0),e(o).closest("form").find("textarea").val(""),e(o).closest("form").find(".success-message").html(t.message).show(),e.ajax({url:window.siteUrl+"/ajax/reviews/"+e(o).closest("form").find("input[name=product_id]").val(),method:"GET",success:function(t){t.error||(e("#list-reviews").html(t.data.html),e(document).find("select.rating").each((function(){var t="true"===e(this).attr("data-read-only");e(this).barrating({theme:"fontawesome-stars",readonly:t,emptyValue:"0"})})))}}),setTimeout((function(){e(this).closest("form").find(".success-message").html("").hide()}),5e3)),e(o).prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading")},error:function(s){e(o).prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading"),t(s,e(o).closest("form"))}})}))})),e(".form-coupon-wrapper .coupon-code").keypress((function(t){if(13===t.keyCode)return e(".apply-coupon-code").trigger("click"),t.preventDefault(),t.stopPropagation(),!1})),e(document).on("click",".btn-apply-coupon-code",(function(t){t.preventDefault();var s=e(t.currentTarget);s.prop("disabled",!0).addClass("btn-disabled").addClass("button-loading"),e.ajax({url:s.data("url"),type:"POST",data:{coupon_code:s.closest(".form-coupon-wrapper").find(".coupon-code").val()},headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")},success:function(t){t.error?(e(".coupon-error-msg .text-danger").text(t.message),s.prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading")):e(".form--shopping-cart").load(window.location.href+"?applied_coupon=1 .form--shopping-cart > *",(function(){s.prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading")}))},error:function(t){void 0!==t.responseJSON?"undefined"!==t.responseJSON.errors?e.each(t.responseJSON.errors,(function(t,s){e.each(s,(function(t,s){e(".coupon-error-msg .text-danger").text(s)}))})):void 0!==t.responseJSON.message&&e(".coupon-error-msg .text-danger").text(t.responseJSON.message):e(".coupon-error-msg .text-danger").text(t.status.text),s.prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading")}})})),e(document).on("click",".btn-remove-coupon-code",(function(t){t.preventDefault();var s=e(t.currentTarget);s.prop("disabled",!0).addClass("btn-disabled").addClass("button-loading"),e.ajax({url:s.data("url"),type:"POST",headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")},success:function(t){t.error?(e(".coupon-error-msg .text-danger").text(t.message),s.prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading")):e(".form--shopping-cart").load(window.location.href+" .form--shopping-cart > *",(function(){s.prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading")}))},error:function(t){void 0!==t.responseJSON?"undefined"!==t.responseJSON.errors?e.each(t.responseJSON.errors,(function(t,s){e.each(s,(function(t,s){e(".coupon-error-msg .text-danger").text(s)}))})):void 0!==t.responseJSON.message&&e(".coupon-error-msg .text-danger").text(t.responseJSON.message):e(".coupon-error-msg .text-danger").text(t.status.text),s.prop("disabled",!1).removeClass("btn-disabled").removeClass("button-loading")}})}))}(jQuery);