(()=>{function e(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var o=function(){function o(){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o)}var n,t,a;return n=o,(t=[{key:"init",value:function(){$(document).on("click",".btn-confirm-order",(function(e){e.preventDefault();var o=$(e.currentTarget);o.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:o.closest("form").prop("action"),data:o.closest("form").serialize(),success:function(e){e.error?Canopy.showError(e.message):($("#main-order-content").load(window.location.href+" #main-order-content > *"),o.closest("div").remove(),Canopy.showSuccess(e.message)),o.removeClass("button-loading")},error:function(e){Canopy.handleError(e),o.removeClass("button-loading")}})}));var e=document.querySelector('input[id="order_video"]'),o=document.querySelector('input[id="video_upload_url"]').value;FilePond.create(e),FilePond.parse(document.body),FilePond.setOptions({server:{process:{url:o,data:{_token:$('meta[name="csrf-token"]').attr("content")},method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},onload:function(e){console.log(e),Canopy.showSuccess(e.message)},onerror:function(e){console.log(e),Canopy.showSuccess(e.message)}}}}),$(document).on("click",".choose_file_btn button",(function(e){e.preventDefault();var o=$(e.currentTarget);o.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:o.closest("form").prop("action"),data:o.closest("form").serialize(),success:function(e){console.log(e),o.removeClass("button-loading")},error:function(e){Canopy.handleError(e),o.removeClass("button-loading")}})})),$(document).on("click",".btn-trigger-complete",(function(e){e.preventDefault();var o=$(e.currentTarget);o.addClass("button-loading"),o.removeClass("hidden"),$.ajax({type:"POST",cache:!1,url:o.data("target"),success:function(e){e.error?Canopy.showError(e.message):(Canopy.showSuccess(e.message),o.addClass("hidden")),o.removeClass("button-loading")},error:function(e){Canopy.handleError(e),o.removeClass("button-loading")}})})),$(document).on("click",".btn-trigger-resend-order-confirmation-modal",(function(e){e.preventDefault(),$("#confirm-resend-confirmation-email-button").data("action",$(e.currentTarget).data("action")),$("#resend-order-confirmation-email-modal").modal("show")})),$(document).on("click","#confirm-resend-confirmation-email-button",(function(e){e.preventDefault();var o=$(e.currentTarget);o.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:o.data("action"),success:function(e){e.error?Canopy.showError(e.message):Canopy.showSuccess(e.message),o.removeClass("button-loading"),$("#resend-order-confirmation-email-modal").modal("hide")},error:function(e){Canopy.handleError(e),o.removeClass("button-loading")}})})),$(document).on("click",".btn-trigger-shipment",(function(e){e.preventDefault();var o=$(e.currentTarget),n=$(".shipment-create-wrap");n.toggleClass("hidden"),n.hasClass("shipment-data-loaded")||(Canopy.blockUI({target:n,iconOnly:!0,overlayColor:"none"}),$.ajax({url:o.data("target"),type:"GET",success:function(e){e.error?Canopy.showError(e.message):(n.html(e.data),n.addClass("shipment-data-loaded"),Canopy.initResources()),Canopy.unblockUI(n)},error:function(e){Canopy.handleError(e),Canopy.unblockUI(n)}}))})),$(document).on("change","#store_id",(function(e){var o=$(".shipment-create-wrap");Canopy.blockUI({target:o,iconOnly:!0,overlayColor:"none"}),$("#select-shipping-provider").load($(".btn-trigger-shipment").data("target")+"?view=true&store_id="+$(e.currentTarget).val()+" #select-shipping-provider > *",(function(){Canopy.unblockUI(o),Canopy.initResources()}))})),$(document).on("change",".shipment-form-weight",(function(e){var o=$(".shipment-create-wrap");Canopy.blockUI({target:o,iconOnly:!0,overlayColor:"none"}),$("#select-shipping-provider").load($(".btn-trigger-shipment").data("target")+"?view=true&store_id="+$("#store_id").val()+"&weight="+$(e.currentTarget).val()+" #select-shipping-provider > *",(function(){Canopy.unblockUI(o),Canopy.initResources()}))})),$(document).on("click",".table-shipping-select-options .clickable-row",(function(e){var o=$(e.currentTarget);$(".input-hidden-shipping-method").val(o.data("key")),$(".input-hidden-shipping-option").val(o.data("option")),$(".input-show-shipping-method").val(o.find("span.ws-nm").text())})),$(document).on("click",".btn-create-shipment",(function(e){e.preventDefault();var o=$(e.currentTarget);o.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:o.closest("form").prop("action"),data:o.closest("form").serialize(),success:function(e){e.error?Canopy.showError(e.message):(Canopy.showSuccess(e.message),$("#main-order-content").load(window.location.href+" #main-order-content > *"),$(".btn-trigger-shipment").remove()),o.removeClass("button-loading")},error:function(e){Canopy.handleError(e),o.removeClass("button-loading")}})})),$(document).on("click",".btn-cancel-shipment",(function(e){e.preventDefault(),$("#confirm-cancel-shipment-button").data("action",$(e.currentTarget).data("action")),$("#cancel-shipment-modal").modal("show")})),$(document).on("click","#confirm-cancel-shipment-button",(function(e){e.preventDefault();var o=$(e.currentTarget);o.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:o.data("action"),success:function(e){e.error?Canopy.showError(e.message):(Canopy.showSuccess(e.message),$(".carrier-status").addClass("carrier-status-"+e.data.status).text(e.data.status_text),$("#cancel-shipment-modal").modal("hide"),$("#order-history-wrapper").load(window.location.href+" #order-history-wrapper > *"),$(".shipment-actions-wrapper").remove()),o.removeClass("button-loading")},error:function(e){Canopy.handleError(e),o.removeClass("button-loading")}})})),$(document).on("click",".btn-close-shipment-panel",(function(e){e.preventDefault(),$(".shipment-create-wrap").addClass("hidden")})),$(document).on("click",".btn-trigger-update-shipping-address",(function(e){e.preventDefault(),$("#update-shipping-address-modal").modal("show")})),$(document).on("click","#confirm-update-shipping-address-button",(function(e){e.preventDefault();var o=$(e.currentTarget);o.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:o.closest(".modal-content").find("form").prop("action"),data:o.closest(".modal-content").find("form").serialize(),success:function(e){if(e.error)Canopy.showError(e.message);else{Canopy.showSuccess(e.message),$("#update-shipping-address-modal").modal("hide"),$(".shipment-address-box-1").html(e.data.line),$(".text-infor-subdued.shipping-address-info").html(e.data.detail);var n=$(".shipment-create-wrap");Canopy.blockUI({target:n,iconOnly:!0,overlayColor:"none"}),$("#select-shipping-provider").load($(".btn-trigger-shipment").data("target")+"?view=true #select-shipping-provider > *",(function(){Canopy.unblockUI(n),Canopy.initResources()}))}o.removeClass("button-loading")},error:function(e){Canopy.handleError(e),o.removeClass("button-loading")}})})),$(document).on("click",".btn-update-order",(function(e){e.preventDefault();var o=$(e.currentTarget);o.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:o.closest("form").prop("action"),data:o.closest("form").serialize(),success:function(e){e.error?Canopy.showError(e.message):Canopy.showSuccess(e.message),o.removeClass("button-loading")},error:function(e){Canopy.handleError(e),o.removeClass("button-loading")}})})),$(document).on("click",".btn-trigger-cancel-order",(function(e){e.preventDefault(),$("#confirm-cancel-order-button").data("target",$(e.currentTarget).data("target")),$("#cancel-order-modal").modal("show")})),$(document).on("click","#confirm-cancel-order-button",(function(e){e.preventDefault();var o=$(e.currentTarget);o.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:o.data("target"),success:function(e){e.error?Canopy.showError(e.message):(Canopy.showSuccess(e.message),$("#main-order-content").load(window.location.href+" #main-order-content > *"),$("#cancel-order-modal").modal("hide")),o.removeClass("button-loading")},error:function(e){Canopy.handleError(e),o.removeClass("button-loading")}})})),$(document).on("click",".btn-trigger-confirm-payment",(function(e){e.preventDefault(),$("#confirm-payment-order-button").data("target",$(e.currentTarget).data("target")),$("#confirm-payment-modal").modal("show")})),$(document).on("click","#confirm-payment-order-button",(function(e){e.preventDefault();var o=$(e.currentTarget);o.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:o.data("target"),success:function(e){e.error?Canopy.showError(e.message):(Canopy.showSuccess(e.message),$(".page-content").load(window.location.href+" .page-content > *"),$("#confirm-payment-modal").modal("hide")),o.removeClass("button-loading")},error:function(e){Canopy.handleError(e),o.removeClass("button-loading")}})})),$(document).on("click",".show-timeline-dropdown",(function(e){e.preventDefault(),$($(e.currentTarget).data("target")).slideToggle(),$(e.currentTarget).closest(".comment-log-item").toggleClass("bg-white")})),$(document).on("keyup",".input-sync-item",(function(e){var o=$(e.currentTarget).val();o&&!isNaN(o)||(o=0),$(e.currentTarget).closest(".page-content").find($(e.currentTarget).data("target")).text(Canopy.numberFormat(parseFloat(o),2))})),$(document).on("click",".btn-trigger-refund",(function(e){e.preventDefault(),$("#confirm-refund-modal").modal("show")})),$(document).on("change",".j-refund-quantity",(function(){var e=0;$.each($(".j-refund-quantity"),(function(o,n){var t=$(n).val();t&&!isNaN(t)||(t=0),e+=parseFloat(t)})),$(".total-restock-items").text(e)})),$(document).on("click","#confirm-refund-payment-button",(function(e){e.preventDefault();var o=$(e.currentTarget);o.addClass("button-loading"),$.ajax({type:"POST",cache:!1,url:o.closest(".modal-dialog").find("form").prop("action"),data:o.closest(".modal-dialog").find("form").serialize(),success:function(e){e.error?Canopy.showError(e.message):($(".page-content").load(window.location.href+" .page-content > *"),Canopy.showSuccess(e.message),o.closest(".modal").modal("hide")),o.removeClass("button-loading")},error:function(e){Canopy.handleError(e),o.removeClass("button-loading")}})}))}}])&&e(n.prototype,t),a&&e(n,a),Object.defineProperty(n,"prototype",{writable:!1}),o}();$(document).ready((function(){(new o).init()}))})();