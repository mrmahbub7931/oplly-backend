(()=>{function e(e,a){for(var o=0;o<a.length;o++){var r=a[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function a(){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a)}var o,r,n;return o=a,(r=[{key:"init",value:function(){var e=$("#table-backups");e.on("click",".deleteDialog",(function(e){e.preventDefault(),$(".delete-crud-entry").data("section",$(e.currentTarget).data("section")),$(".modal-confirm-delete").modal("show")})),e.on("click",".restoreBackup",(function(e){e.preventDefault(),$("#restore-backup-button").data("section",$(e.currentTarget).data("section")),$("#restore-backup-modal").modal("show")})),$(".delete-crud-entry").on("click",(function(a){a.preventDefault(),$(".modal-confirm-delete").modal("hide");var o=$(a.currentTarget).data("section");$.ajax({url:o,type:"DELETE",success:function(a){a.error?Canopy.showError(a.message):(e.find('a[data-section="'+o+'"]').closest("tr").remove(),Canopy.showSuccess(a.message))},error:function(e){Canopy.handleError(e)}})})),$("#restore-backup-button").on("click",(function(e){e.preventDefault();var a=$(e.currentTarget);a.addClass("button-loading"),$.ajax({url:a.data("section"),type:"GET",success:function(e){a.removeClass("button-loading"),a.closest(".modal").modal("hide"),e.error?Canopy.showError(e.message):(Canopy.showSuccess(e.message),window.location.reload())},error:function(e){a.removeClass("button-loading"),Canopy.handleError(e)}})})),$(document).on("click","#generate_backup",(function(e){e.preventDefault(),$("#name").val(""),$("#description").val(""),$("#create-backup-modal").modal("show")})),$("#create-backup-modal").on("click","#create-backup-button",(function(a){a.preventDefault();var o=$(a.currentTarget);o.addClass("button-loading");var r=$("#name").val(),n=$("#description").val(),t=!1;""!==r&&null!==r||(t=!0,Canopy.showError("Backup name is required!")),""!==n&&null!==n||(t=!0,Canopy.showError("Backup description is required!")),t?o.removeClass("button-loading"):$.ajax({url:$("div[data-route-create]").data("route-create"),type:"POST",data:{name:r,description:n},success:function(a){o.removeClass("button-loading"),o.closest(".modal").modal("hide"),a.error?Canopy.showError(a.message):(e.find(".no-backup-row").remove(),e.find("tbody").append(a.data),Canopy.showSuccess(a.message))},error:function(e){o.removeClass("button-loading"),Canopy.handleError(e)}})}))}}])&&e(o.prototype,r),n&&e(o,n),Object.defineProperty(o,"prototype",{writable:!1}),a}();$(document).ready((function(){(new a).init()}))})();